<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初戀天堂 ‧ 職業推薦測驗</title>
    <style>
        /* ========== 外觀全部限制在 #cl-quiz 裡，避免干擾論壇 ========== */
        #cl-quiz { max-width:900px; margin:0 auto 30px; font-family:"Noto Sans TC",sans-serif; }
        #cl-quiz .clq-card { background:rgba(15,18,40,.92); color:#fff; border-radius:16px; padding:20px; }
        #cl-quiz .clq-title { text-align:center; margin:0 0 5px; font-size:1.6rem; }
        #cl-quiz .clq-subtitle { text-align:center; color:#ccc; margin-bottom:15px; }
        #cl-quiz .clq-question { margin-bottom:18px; padding:14px; border-radius:12px; background:rgba(255,255,255,.05); }
        #cl-quiz .clq-option { display:block; margin:5px 0; cursor:pointer; }
        #cl-quiz .clq-btn { background:#ff8a3d; border:none; color:#000; padding:10px 18px; border-radius:50px; font-weight:600; cursor:pointer; }
        #cl-quiz .clq-result { margin-top:20px; padding:15px; background:rgba(255,255,255,.07); border-radius:12px; display:none; }
        #cl-quiz .clq-result-class { font-size:1.4rem; font-weight:700; color:#ffd976; margin-bottom:6px; }
        /* 分享區 */
        #cl-quiz .clq-share-title { margin-top:18px; font-size:1.05rem; font-weight:700; }
        #cl-quiz .clq-shareText { width:100%; height:120px; margin-top:8px; border-radius:8px; border:none; padding:10px; font-size:0.9rem; }
        #cl-quiz .clq-copyBtn { margin-top:8px; padding:8px 14px; border:none; background:#ffe27a; color:#000; border-radius:8px; font-weight:600; cursor:pointer; }
    </style>
</head>
<body>

<div id="cl-quiz" class="clq-page">
    <div class="clq-card">
        <h1 class="clq-title">初戀天堂 ‧ 職業推薦測驗</h1>
        <div class="clq-subtitle">回答幾個簡單問題，看看你最適合成為哪一種英雄。</div>
        <form id="clq-quizForm">
            <div class="clq-question">
                <div class="clq-question-title">Q1. 你偏好的戰鬥風格是？</div>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="wizard:1,elf:1"> 遠距離、用魔法或元素之力解決問題。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="knight:2,dragonKnight:1"> 穿著重甲近身肉搏，穩穩頂在最前線。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="prince:2,knight:1"> 兼具指揮與戰鬥，必要時也能衝鋒陷陣。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="darkElf:2,dragonKnight:1"> 高爆發的暗殺與追擊，一瞬間終結敵人。
                </label>
            </div>
            <div class="clq-question">
                <div class="clq-question-title">Q2. 在團隊中，你最習慣扮演哪種角色？</div>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="prince:3"> 領袖與決策者，負責號召、溝通與下指令。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="knight:2,dragonKnight:1"> 主要坦前面、吸收傷害、保護隊友。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="wizard:1,elf:2"> 輔助、治療、控制戰場，讓隊友打得更輕鬆。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="darkElf:2,dragonKnight:1"> 單點輸出或收割，專心把敵人一個一個放倒。
                </label>
            </div>
            <div class="clq-question">
                <div class="clq-question-title">Q3. 面對力量與信念，你比較像？</div>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="prince:2,knight:2,elf:1"> 堅守正義、推翻腐敗、保護重要的人。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="wizard:2,elf:1"> 理性優先，研究力量本質，不盲從任何神祇。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="darkElf:3,dragonKnight:1"> 願意擁抱黑暗，只為守護自己在乎的事物。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="wizard:1,dragonKnight:2"> 不管正邪，只重視能不能贏。
                </label>
            </div>
            <div class="clq-question">
                <div class="clq-question-title">Q4. 你偏好哪種難度？</div>
                <label class="clq-option">
                    <input type="radio" name="q4" data-scores="prince:2,knight:2"> 簡單直覺、上手快。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q4" data-scores="elf:2,dragonKnight:1"> 中度操作，彈性好。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q4" data-scores="wizard:2,darkElf:2,dragonKnight:1"> 願意練技術，換取爆發或後期強勢。
                </label>
            </div>
            <div class="clq-question">
                <div class="clq-question-title">Q5. 單看外型，你最喜歡哪個風格？</div>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="prince:3"> 王者氣質、佩劍披風的領袖風格。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="knight:2,dragonKnight:1"> 厚甲盾槍、堅定前鋒的騎士風。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="elf:3"> 森林系、美型種族的妖精風格。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="darkElf:3,dragonKnight:1"> 黑皮紅眼、神秘危險的暗影風。
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="wizard:3"> 長袍法杖、魔法陣與古籍的法術風格。
                </label>
            </div>
            <button type="button" id="clq-submit" class="clq-btn">查看推薦職業</button>
        </form>
        <div id="clq-result" class="clq-result">
            <div class="clq-result-title">測驗結果：</div>
            <div class="clq-result-class" id="clq-resultClass"></div>
            <div class="clq-result-desc" id="clq-resultDesc"></div>
            <div id="clq-shareBox" class="clq-shareBox" style="display:none;">
                <div class="clq-share-title">📣 分享你的結果</div>
                <textarea id="clq-shareText" class="clq-shareText" readonly></textarea>
                <button id="clq-copyBtn" class="clq-copyBtn">一鍵複製分享文案</button>
            </div>
            <div class="clq-result-tip">※ 這只是傾向推薦，你仍然可以自由選擇任何職業。</div>
        </div>
    </div>
</div>

<script>
    (function(){
        // *** 請注意：這裡的網址已替換為您 GitHub Pages 的實際網址 ***
        const QUIZ_URL = "https://eru528.github.io/lineage-quiz/"; 

        const CLASS_INFO = {
            wizard:{name:"法師（Wizard）",desc:"你適合成為以知識與魔法為武器的法師。"},
            prince:{name:"王族（Prince）",desc:"你天生具備領袖氣質，是攻城戰的核心靈魂。"},
            knight:{name:"騎士（Knight）",desc:"你適合站在第一線，用力量與盾牌守護隊友。"},
            elf:{name:"妖精（Elf）",desc:"你能攻能輔，多才多藝，是最均衡的職業。"},
            darkElf:{name:"黑暗妖精（Dark Elf）",desc:"你擁抱黑暗與爆發，是戰場上一瞬致命的陰影刺客。"},
            dragonKnight:{name:"龍騎士（Dragon Knight）",desc:"你擅長近戰爆發，能使用龍族之力扭轉戰局。"}
        };

        function calculateResult(){
            const form = document.getElementById("clq-quizForm");
            // 修正：在 Chrome 瀏覽器中，querySelector 裡的屬性選擇器需要引號
            const qs = ["q1","q2","q3","q4","q5"];
            const scores = {wizard:0, prince:0, knight:0, elf:0, darkElf:0, dragonKnight:0};

            for(let q of qs){
                // 查找選中的 radio 按鈕
                const sel = form.querySelector(`input[name="${q}"]:checked`); 
                if(!sel){
                    alert("每題都要回答喔！");
                    return;
                }
                const pairs = sel.dataset.scores.split(",");
                for(let p of pairs){
                    let [k,v] = p.split(":");
                    scores[k] += parseInt(v);
                }
            }
            
            let best="", max=-999;
            for(let k in scores){
                if(scores[k]>max){
                    max=scores[k];
                    best=k;
                }
            }

            // 顯示結果
            const r = document.getElementById("clq-result");
            document.getElementById("clq-resultClass").innerHTML = CLASS_INFO[best].name;
            document.getElementById("clq-resultDesc").innerHTML = CLASS_INFO[best].desc;
            r.style.display="block";

            // ⭐產生分享文案 (已替換您的網址)
            const share = `【初戀天堂 ‧ 職業測驗】
我測出來最適合的職業是：▶ ${CLASS_INFO[best].name}
你呢？快來試試你適合哪個職業！
測驗網址：${QUIZ_URL}`;

            document.getElementById("clq-shareText").value = share;
            document.getElementById("clq-shareBox").style.display = "block";
        }

        // 綁定按鈕
        document.getElementById("clq-submit").addEventListener("click", calculateResult);

        // 一鍵複製
        document.getElementById("clq-copyBtn").addEventListener("click", function(){
            const ta = document.getElementById("clq-shareText");
            ta.select();
            ta.setSelectionRange(0,99999);
            // 檢查瀏覽器是否支持 clipboard.writeText
            if (navigator.clipboard) {
                navigator.clipboard.writeText(ta.value)
                    .then(() => {
                        alert("已複製！可以貼到 FB / DC / LINE 囉！");
                    })
                    .catch(err => {
                        // 舊版瀏覽器或安全限制下的備用方案
                        document.execCommand("copy");
                        alert("已複製！可以貼到 FB / DC / LINE 囉！");
                    });
            } else {
                // 傳統方法
                document.execCommand("copy");
                alert("已複製！可以貼到 FB / DC / LINE 囉！");
            }
        });
    })();
</script>

</body>
</html>
