<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆæˆ€å¤©å ‚ â€§ è·æ¥­æ¨è–¦æ¸¬é©—</title>
    <style>
        /* ========== å¤–è§€å…¨éƒ¨é™åˆ¶åœ¨ #cl-quiz è£¡ï¼Œé¿å…å¹²æ“¾è«–å£‡ ========== */
        #cl-quiz { max-width:900px; margin:0 auto 30px; font-family:"Noto Sans TC",sans-serif; }
        #cl-quiz .clq-card { background:rgba(15,18,40,.92); color:#fff; border-radius:16px; padding:20px; }
        #cl-quiz .clq-title { text-align:center; margin:0 0 5px; font-size:1.6rem; }
        #cl-quiz .clq-subtitle { text-align:center; color:#ccc; margin-bottom:15px; }
        
        /* â­ åˆ†æ­¥é¡¯ç¤ºçš„æ ¸å¿ƒ CSS â­ */
        #cl-quiz .clq-question {
            margin-bottom:18px; 
            padding:14px; 
            border-radius:12px; 
            background:rgba(255,255,255,.05);
            /* åˆå§‹ç‹€æ…‹ï¼Œéš±è—ä¸”é€æ˜ */
            opacity: 0;
            display: none;
            transition: opacity 0.5s ease-in-out; /* æ·¡å…¥æ·¡å‡ºæ•ˆæœ */
        }
        /* é¡¯ç¤ºä¸­çš„å•é¡Œ */
        #cl-quiz .clq-question.active {
            opacity: 1;
            display: block;
        }

        #cl-quiz .clq-option { display:block; margin:5px 0; cursor:pointer; }
        #cl-quiz .clq-btn { 
            background:#ff8a3d; 
            border:none; 
            color:#000; 
            padding:10px 18px; 
            border-radius:50px; 
            font-weight:600; 
            cursor:pointer;
            margin-top: 15px; /* æŒ‰éˆ•é–“è· */
        }
        /* æŒ‰éˆ•éš±è— */
        #cl-quiz .hidden-button {
            display: none;
        }

        #cl-quiz .clq-result { margin-top:20px; padding:15px; background:rgba(255,255,255,.07); border-radius:12px; display:none; }
        #cl-quiz .clq-result-class { font-size:1.4rem; font-weight:700; color:#ffd976; margin-bottom:6px; }
        /* åˆ†äº«å€ */
        #cl-quiz .clq-share-title { margin-top:18px; font-size:1.05rem; font-weight:700; }
        #cl-quiz .clq-shareText { width:100%; height:120px; margin-top:8px; border-radius:8px; border:none; padding:10px; font-size:0.9rem; }
        #cl-quiz .clq-copyBtn { margin-top:8px; padding:8px 14px; border:none; background:#ffe27a; color:#000; border-radius:8px; font-weight:600; cursor:pointer; }
    </style>
</head>
<body>

<div id="cl-quiz" class="clq-page">
    <div class="clq-card">
        <h1 class="clq-title">åˆæˆ€å¤©å ‚ â€§ è·æ¥­æ¨è–¦æ¸¬é©—</h1>
        <div class="clq-subtitle">å›ç­”å¹¾å€‹ç°¡å–®å•é¡Œï¼Œçœ‹çœ‹ä½ æœ€é©åˆæˆç‚ºå“ªä¸€ç¨®è‹±é›„ã€‚</div>
        <form id="clq-quizForm">
            <div class="clq-question active" data-qindex="0">
                <div class="clq-question-title">Q1. ä½ åå¥½çš„æˆ°é¬¥é¢¨æ ¼æ˜¯ï¼Ÿ</div>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="wizard:1,elf:1"> é è·é›¢ã€ç”¨é­”æ³•æˆ–å…ƒç´ ä¹‹åŠ›è§£æ±ºå•é¡Œã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="knight:2,dragonKnight:1"> ç©¿è‘—é‡ç”²è¿‘èº«è‚‰æï¼Œç©©ç©©é ‚åœ¨æœ€å‰ç·šã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="prince:2,knight:1"> å…¼å…·æŒ‡æ®èˆ‡æˆ°é¬¥ï¼Œå¿…è¦æ™‚ä¹Ÿèƒ½è¡é‹’é™·é™£ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q1" data-scores="darkElf:2,dragonKnight:1"> é«˜çˆ†ç™¼çš„æš—æ®ºèˆ‡è¿½æ“Šï¼Œä¸€ç¬é–“çµ‚çµæ•µäººã€‚
                </label>
            </div>
            <div class="clq-question" data-qindex="1">
                <div class="clq-question-title">Q2. åœ¨åœ˜éšŠä¸­ï¼Œä½ æœ€ç¿’æ…£æ‰®æ¼”å“ªç¨®è§’è‰²ï¼Ÿ</div>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="prince:3"> é ˜è¢–èˆ‡æ±ºç­–è€…ï¼Œè² è²¬è™Ÿå¬ã€æºé€šèˆ‡ä¸‹æŒ‡ä»¤ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="knight:2,dragonKnight:1"> ä¸»è¦å¦å‰é¢ã€å¸æ”¶å‚·å®³ã€ä¿è­·éšŠå‹ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="wizard:1,elf:2"> è¼”åŠ©ã€æ²»ç™‚ã€æ§åˆ¶æˆ°å ´ï¼Œè®“éšŠå‹æ‰“å¾—æ›´è¼•é¬†ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q2" data-scores="darkElf:2,dragonKnight:1"> å–®é»è¼¸å‡ºæˆ–æ”¶å‰²ï¼Œå°ˆå¿ƒæŠŠæ•µäººä¸€å€‹ä¸€å€‹æ”¾å€’ã€‚
                </label>
            </div>
            <div class="clq-question" data-qindex="2">
                <div class="clq-question-title">Q3. é¢å°åŠ›é‡èˆ‡ä¿¡å¿µï¼Œä½ æ¯”è¼ƒåƒï¼Ÿ</div>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="prince:2,knight:2,elf:1"> å …å®ˆæ­£ç¾©ã€æ¨ç¿»è…æ•—ã€ä¿è­·é‡è¦çš„äººã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="wizard:2,elf:1"> ç†æ€§å„ªå…ˆï¼Œç ”ç©¶åŠ›é‡æœ¬è³ªï¼Œä¸ç›²å¾ä»»ä½•ç¥ç¥‡ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="darkElf:3,dragonKnight:1"> é¡˜æ„æ“æŠ±é»‘æš—ï¼Œåªç‚ºå®ˆè­·è‡ªå·±åœ¨ä¹çš„äº‹ç‰©ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q3" data-scores="wizard:1,dragonKnight:2"> ä¸ç®¡æ­£é‚ªï¼Œåªé‡è¦–èƒ½ä¸èƒ½è´ã€‚
                </label>
            </div>
            <div class="clq-question" data-qindex="3">
                <div class="clq-question-title">Q4. ä½ åå¥½å“ªç¨®é›£åº¦ï¼Ÿ</div>
                <label class="clq-option">
                    <input type="radio" name="q4" data-scores="prince:2,knight:2"> ç°¡å–®ç›´è¦ºã€ä¸Šæ‰‹å¿«ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q4" data-scores="elf:2,dragonKnight:1"> ä¸­åº¦æ“ä½œï¼Œå½ˆæ€§å¥½ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q4" data-scores="wizard:2,darkElf:2,dragonKnight:1"> é¡˜æ„ç·´æŠ€è¡“ï¼Œæ›å–çˆ†ç™¼æˆ–å¾ŒæœŸå¼·å‹¢ã€‚
                </label>
            </div>
            <div class="clq-question" data-qindex="4">
                <div class="clq-question-title">Q5. å–®çœ‹å¤–å‹ï¼Œä½ æœ€å–œæ­¡å“ªå€‹é¢¨æ ¼ï¼Ÿ</div>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="prince:3"> ç‹è€…æ°£è³ªã€ä½©åŠæŠ«é¢¨çš„é ˜è¢–é¢¨æ ¼ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="knight:2,dragonKnight:1"> åšç”²ç›¾æ§ã€å …å®šå‰é‹’çš„é¨å£«é¢¨ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="elf:3"> æ£®æ—ç³»ã€ç¾å‹ç¨®æ—çš„å¦–ç²¾é¢¨æ ¼ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="darkElf:3,dragonKnight:1"> é»‘çš®ç´…çœ¼ã€ç¥ç§˜å±éšªçš„æš—å½±é¢¨ã€‚
                </label>
                <label class="clq-option">
                    <input type="radio" name="q5" data-scores="wizard:3"> é•·è¢æ³•æ–ã€é­”æ³•é™£èˆ‡å¤ç±çš„æ³•è¡“é¢¨æ ¼ã€‚
                </label>
            </div>
            
            <button type="button" id="clq-next" class="clq-btn">ä¸‹ä¸€é¡Œ â†’</button>
            <button type="button" id="clq-submit" class="clq-btn hidden-button">æŸ¥çœ‹æ¨è–¦è·æ¥­</button>
        </form>
        <div id="clq-result" class="clq-result">
            <div class="clq-result-title">æ¸¬é©—çµæœï¼š</div>
            <div class="clq-result-class" id="clq-resultClass"></div>
            <div class="clq-result-desc" id="clq-resultDesc"></div>
            <div id="clq-shareBox" class="clq-shareBox" style="display:none;">
                <div class="clq-share-title">ğŸ“£ åˆ†äº«ä½ çš„çµæœ</div>
                <textarea id="clq-shareText" class="clq-shareText" readonly></textarea>
                <button id="clq-copyBtn" class="clq-copyBtn">ä¸€éµè¤‡è£½åˆ†äº«æ–‡æ¡ˆ</button>
            </div>
            <div class="clq-result-tip">â€» é€™åªæ˜¯å‚¾å‘æ¨è–¦ï¼Œä½ ä»ç„¶å¯ä»¥è‡ªç”±é¸æ“‡ä»»ä½•è·æ¥­ã€‚</div>
        </div>
    </div>
</div>

<script>
    (function(){
        const QUIZ_URL = "https://eru528.github.io/lineage-quiz/"; 
        const CLASS_INFO = {
            wizard:{name:"æ³•å¸«ï¼ˆWizardï¼‰",desc:"ä½ é©åˆæˆç‚ºä»¥çŸ¥è­˜èˆ‡é­”æ³•ç‚ºæ­¦å™¨çš„æ³•å¸«ã€‚"},
            prince:{name:"ç‹æ—ï¼ˆPrinceï¼‰",desc:"ä½ å¤©ç”Ÿå…·å‚™é ˜è¢–æ°£è³ªï¼Œæ˜¯æ”»åŸæˆ°çš„æ ¸å¿ƒéˆé­‚ã€‚"},
            knight:{name:"é¨å£«ï¼ˆKnightï¼‰",desc:"ä½ é©åˆç«™åœ¨ç¬¬ä¸€ç·šï¼Œç”¨åŠ›é‡èˆ‡ç›¾ç‰Œå®ˆè­·éšŠå‹ã€‚"},
            elf:{name:"å¦–ç²¾ï¼ˆElfï¼‰",desc:"ä½ èƒ½æ”»èƒ½è¼”ï¼Œå¤šæ‰å¤šè—ï¼Œæ˜¯æœ€å‡è¡¡çš„è·æ¥­ã€‚"},
            darkElf:{name:"é»‘æš—å¦–ç²¾ï¼ˆDark Elfï¼‰",desc:"ä½ æ“æŠ±é»‘æš—èˆ‡çˆ†ç™¼ï¼Œæ˜¯æˆ°å ´ä¸Šä¸€ç¬è‡´å‘½çš„é™°å½±åˆºå®¢ã€‚"},
            dragonKnight:{name:"é¾é¨å£«ï¼ˆDragon Knightï¼‰",desc:"ä½ æ“…é•·è¿‘æˆ°çˆ†ç™¼ï¼Œèƒ½ä½¿ç”¨é¾æ—ä¹‹åŠ›æ‰­è½‰æˆ°å±€ã€‚"}
        };

        const questionContainers = document.querySelectorAll('.clq-question');
        const nextButton = document.getElementById('clq-next');
        const submitButton = document.getElementById('clq-submit');
        const totalQuestions = questionContainers.length;
        let currentQIndex = 0;
        let scores = {wizard:0, prince:0, knight:0, elf:0, darkElf:0, dragonKnight:0};

        // åˆå§‹åŒ–ï¼šç¢ºä¿åªæœ‰ç¬¬ä¸€é¡Œé¡¯ç¤º
        questionContainers.forEach((q, index) => {
            if (index > 0) {
                q.classList.remove('active');
            }
        });

        function calculateScores(selectedOption) {
            const pairs = selectedOption.dataset.scores.split(",");
            for(let p of pairs){
                let [k,v] = p.split(":");
                scores[k] += parseInt(v);
            }
        }
        
        // æ ¸å¿ƒé‚è¼¯ï¼šé¡¯ç¤ºä¸‹ä¸€é¡Œ
        function showNextQuestion() {
            const currentQ = questionContainers[currentQIndex];
            const currentQName = currentQ.querySelector('input').name;
            const selectedOption = currentQ.querySelector(`input[name="${currentQName}"]:checked`);

            if (!selectedOption) {
                alert("è«‹å›ç­”ç•¶å‰å•é¡Œï¼");
                return;
            }

            // ç´¯ç©ç•¶å‰åˆ†æ•¸
            calculateScores(selectedOption);

            // 1. æ·¡å‡ºç•¶å‰å•é¡Œ
            currentQ.style.opacity = '0';
            // ä½¿ç”¨å»¶é²ä¾†åŸ·è¡Œ display:noneï¼Œä»¥å¯¦ç¾æ·¡å‡ºæ•ˆæœ
            setTimeout(() => {
                currentQ.classList.remove('active');
                
                // é€²å…¥ä¸‹ä¸€é¡Œ
                currentQIndex++;

                if (currentQIndex < totalQuestions) {
                    const nextQ = questionContainers[currentQIndex];
                    
                    // 2. æ·¡å…¥ä¸‹ä¸€é¡Œ
                    nextQ.style.display = 'block';
                    // å¿…é ˆå»¶é²ä¸‹ä¸€å¹€åŸ·è¡Œï¼Œæ‰èƒ½è§¸ç™¼ CSS transition
                    setTimeout(() => {
                        nextQ.classList.add('active');
                    }, 50); 
                    
                } else {
                    // 3. æ¸¬é©—çµæŸï¼Œé¡¯ç¤ºæœ€çµ‚æŒ‰éˆ•
                    nextButton.classList.add('hidden-button');
                    submitButton.classList.remove('hidden-button');
                }
            }, 500); // å»¶é²æ™‚é–“èˆ‡ CSS transition æ™‚é–“ä¸€è‡´

        }

        // æœ€çµ‚è¨ˆç®—çµæœ
        function calculateResult() {
            let best="", max=-999;
            for(let k in scores){
                if(scores[k]>max){
                    max=scores[k];
                    best=k;
                }
            }

            // éš±è—æŒ‰éˆ•å’Œé¡Œç›®ï¼Œé¡¯ç¤ºçµæœ
            const finalQ = questionContainers[totalQuestions - 1];
            finalQ.style.opacity = '0';
            submitButton.classList.add('hidden-button');

            setTimeout(() => {
                finalQ.classList.remove('active');
                
                const r = document.getElementById("clq-result");
                document.getElementById("clq-resultClass").innerHTML = CLASS_INFO[best].name;
                document.getElementById("clq-resultDesc").innerHTML = CLASS_INFO[best].desc;
                r.style.display="block";

                // â­ç”¢ç”Ÿåˆ†äº«æ–‡æ¡ˆ
                const share = `ã€åˆæˆ€å¤©å ‚ â€§ è·æ¥­æ¸¬é©—ã€‘
æˆ‘æ¸¬å‡ºä¾†æœ€é©åˆçš„è·æ¥­æ˜¯ï¼šâ–¶ ${CLASS_INFO[best].name}
ä½ å‘¢ï¼Ÿå¿«ä¾†è©¦è©¦ä½ é©åˆå“ªå€‹è·æ¥­ï¼
æ¸¬é©—ç¶²å€ï¼š${QUIZ_URL}`;

                document.getElementById("clq-shareText").value = share;
                document.getElementById("clq-shareBox").style.display = "block";
            }, 500);
        }

        // ç¶å®šæŒ‰éˆ•äº‹ä»¶
        nextButton.addEventListener("click", showNextQuestion);
        submitButton.addEventListener("click", calculateResult);

        // ä¸€éµè¤‡è£½åŠŸèƒ½ä¿æŒä¸è®Š
        document.getElementById("clq-copyBtn").addEventListener("click", function(){
            const ta = document.getElementById("clq-shareText");
            ta.select();
            ta.setSelectionRange(0,99999);
            // ä½¿ç”¨ç¾ä»£ Clipboard API
            if (navigator.clipboard) {
                navigator.clipboard.writeText(ta.value)
                    .then(() => {
                        alert("å·²è¤‡è£½ï¼å¯ä»¥è²¼åˆ° FB / DC / LINE å›‰ï¼");
                    });
            } else {
                // å‚³çµ±æ–¹æ³•
                document.execCommand("copy");
                alert("å·²è¤‡è£½ï¼å¯ä»¥è²¼åˆ° FB / DC / LINE å›‰ï¼");
            }
        });
    })();
</script>

</body>
</html>
